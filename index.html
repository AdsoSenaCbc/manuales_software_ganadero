<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manuales de Software - Balanceo y Cálculo de Raciones para Bovinos</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400&display=swap" rel="stylesheet">
    <meta name="theme-color" content="#0b1220">
    <link rel="stylesheet" href="css/styles.css?v=20250914">
</head>
<body>
    <!-- Mobile backdrop -->
    <div class="sidebar-backdrop" onclick="toggleSidebar()"></div>

    <!-- Hamburger toggle button - ALWAYS VISIBLE (Global/Mobile) -->
    <button class="sidebar-toggle sidebar-toggle-global" onclick="toggleSidebar()" aria-label="Toggle sidebar">
        <div class="hamburger-icon">
            <span></span>
            <span></span>
            <span></span>
        </div>
    </button>

    <!-- Enhanced Sidebar -->
    <nav class="sidebar">
        <div class="sidebar-header">
            <button class="sidebar-toggle-internal" onclick="toggleSidebar()" aria-label="Contraer barra lateral">
                <div class="hamburger-icon">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
                <span class="label"></span>
            </button>
        </div>
        <div class="sidebar-menu">
            <div class="menu-section">
                <div class="menu-section-title">Navegación Principal</div>
                
                <div class="menu-item">
                    <a href="#" onclick="showManual('home')" id="link-home">
                        <svg class="icon" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12 3.172L2.293 12.88a1 1 0 0 0 1.414 1.414L5 13.001V20a1 1 0 0 0 1 1h4v-5h4v5h4a1 1 0 0 0 1-1v-6.999l1.293 1.293a1 1 0 0 0 1.414-1.414L12 3.172z"/>
                        </svg>
                        <span class="label">Inicio</span>
                    </a>
                </div>

                <div class="menu-item">
                    <a href="#" onclick="showManual('usuario')" id="link-usuario">
                        <svg class="icon" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12 12a5 5 0 1 0-5-5 5.006 5.006 0 0 0 5 5zm0 2c-4.336 0-8 2.163-8 4.833V21a1 1 0 0 0 1 1h14a1 1 0 0 0 1-1v-2.167C20 16.163 16.336 14 12 14z"/>
                        </svg>
                        <span class="label">Manual de Usuario</span>
                    </a>
                </div>

                <div class="menu-item has-dropdown" id="manual-tecnico-dropdown">
                    <a href="#" onclick="toggleDropdown('manual-tecnico-dropdown')" id="link-tecnico">
                        <svg class="icon" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M21.7 13.35l-3.03-3.03a5.004 5.004 0 0 0-6.94-6.94L11 4.13l2.12 2.12 1.41-1.41a3 3 0 1 1 4.24 4.24l-1.41 1.41 2.12 2.12 2.21-2.21a1 1 0 0 1 1.41 1.41l-2.21 2.21 1.81 1.81a1 1 0 1 1-1.41 1.41l-1.81-1.81-6.3 6.3a2 2 0 0 1-2.83 0L3.29 16.7a2 2 0 0 1 0-2.83l6.3-6.3L7.46 5.44 6.04 6.86a5.004 5.004 0 0 0 6.94 6.94l6.3 6.3a1 1 0 0 0 1.41-1.41z"/>
                        </svg>
                        <span class="label">Manual Técnico</span>
                    </a>
                    <div class="submenu">
                        <a href="#" onclick="showManual('tecnico'); scrollToSection('introduccion')">1. Introducción</a>
                        <a href="#" onclick="showManual('tecnico'); scrollToSection('requerimientos')">2. Requerimientos</a>
                        <a href="#" onclick="showManual('tecnico'); scrollToSection('arquitectura')">3. Arquitectura</a>
                        <a href="#" onclick="showManual('tecnico'); scrollToSection('instalacion')">4. Instalación</a>
                        <a href="#" onclick="showManual('tecnico'); scrollToSection('modulos')">5. Módulos</a>
                        <a href="#" onclick="showManual('tecnico'); scrollToSection('interfaz')">6. Interfaz</a>
                        <a href="#" onclick="showManual('tecnico'); scrollToSection('apis')">7. APIs</a>
                        <a href="#" onclick="showManual('tecnico'); scrollToSection('seguridad')">8. Seguridad</a>
                        <a href="#" onclick="showManual('tecnico'); scrollToSection('mantenimiento')">9. Mantenimiento</a>
                        <a href="#" onclick="showManual('tecnico'); scrollToSection('problemas')">10. Soluciones</a>
                    </div>
                </div>

                <div class="menu-item">
                    <a href="#" onclick="showManual('instalacion')" id="link-instalacion">
                        <svg class="icon" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12 3a1 1 0 0 1 1 1v8.586l2.293-2.293a1 1 0 1 1 1.414 1.414l-4.007 4.007a1 1 0 0 1-1.4.004L7.293 11.707a1 1 0 1 1 1.414-1.414L11 12.586V4a1 1 0 0 1 1-1zM4 19a1 1 0 0 1 1-1h14a1 1 0 1 1 0 2H5a1 1 0 0 1-1-1z"/>
                        </svg>
                        <span class="label">Manual de Instalación</span>
                    </a>
                </div>
            </div>
        </div>

        <div class="theme-toggle-container">
            <button class="theme-toggle" onclick="toggleTheme()" id="theme-btn">
                <span class="theme-icon">🌙</span>
                <span class="theme-text">Modo Oscuro</span>
            </button>
        </div>
    </nav>

    <header>
        <h1>Manuales de Software</h1>
        <p>Guías del sistema de balanceo y cálculo de raciones para bovinos del CBC.</p>
    </header>

    <main>
        <div id="manual-home" class="manual-content active">
            <section class="visible">
                <h2>¡Bienvenido!</h2>
                <p>Esta es la guía oficial para el software de balanceo y cálculo de raciones para bovinos desarrollado por el Centro Biotecnológico del Caribe (CBC). Aquí encontrarás toda la información necesaria para utilizar, configurar y mantener esta herramienta diseñada para optimizar la nutrición ganadera, mejorar la productividad y facilitar la toma de decisiones.</p>
            </section>
            
            <section class="visible">
                <h2>Selecciona una sección para comenzar:</h2>
                <div class="interactive-menu">
                    <div class="card" onclick="showManual('usuario')" tabindex="0">
                        <div style="width: 60px; height: 60px; background: linear-gradient(135deg, #3b82f6, #1d4ed8); border-radius: 16px; display: flex; align-items: center; justify-content: center; margin-bottom: 16px;">
                            <svg style="width: 28px; height: 28px; color: white;" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M12 12a5 5 0 1 0-5-5 5.006 5.006 0 0 0 5 5zm0 2c-4.336 0-8 2.163-8 4.833V21a1 1 0 0 0 1 1h14a1 1 0 0 0 1-1v-2.167C20 16.163 16.336 14 12 14z"/>
                            </svg>
                        </div>
                        <h4 style="font-size: 1.25rem; margin-bottom: 8px; color: var(--text-color);">Manual de Usuario</h4>
                        <p style="color: #64748b;">Aprende a usar el software de manera efectiva en tu día a día.</p>
                    </div>

                    <div class="card" onclick="showManual('tecnico')" tabindex="0">
                        <div style="width: 60px; height: 60px; background: linear-gradient(135deg, #059669, #047857); border-radius: 16px; display: flex; align-items: center; justify-content: center; margin-bottom: 16px;">
                            <svg style="width: 28px; height: 28px; color: white;" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M21.7 13.35l-3.03-3.03a5.004 5.004 0 0 0-6.94-6.94L11 4.13l2.12 2.12 1.41-1.41a3 3 0 1 1 4.24 4.24l-1.41 1.41 2.12 2.12 2.21-2.21a1 1 0 0 1 1.41 1.41l-2.21 2.21 1.81 1.81a1 1 0 1 1-1.41 1.41l-1.81-1.81-6.3 6.3a2 2 0 0 1-2.83 0L3.29 16.7a2 2 0 0 1 0-2.83l6.3-6.3L7.46 5.44 6.04 6.86a5.004 5.004 0 0 0 6.94 6.94l6.3 6.3a1 1 0 0 0 1.41-1.41z"/>
                            </svg>
                        </div>
                        <h4 style="font-size: 1.25rem; margin-bottom: 8px; color: var(--text-color);">Manual Técnico</h4>
                        <p style="color: #64748b;">Detalles avanzados sobre la arquitectura y mantenimiento.</p>
                    </div>

                    <div class="card" onclick="showManual('instalacion')" tabindex="0">
                        <div style="width: 60px; height: 60px; background: linear-gradient(135deg, #7c3aed, #5b21b6); border-radius: 16px; display: flex; align-items: center; justify-content: center; margin-bottom: 16px;">
                            <svg style="width: 28px; height: 28px; color: white;" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M12 3a1 1 0 0 1 1 1v8.586l2.293-2.293a1 1 0 1 1 1.414 1.414l-4.007 4.007a1 1 0 0 1-1.4.004L7.293 11.707a1 1 0 1 1 1.414-1.414L11 12.586V4a1 1 0 0 1 1-1zM4 19a1 1 0 0 1 1-1h14a1 1 0 1 1 0 2H5a1 1 0 0 1-1-1z"/>
                            </svg>
                        </div>
                        <h4 style="font-size: 1.25rem; margin-bottom: 8px; color: var(--text-color);">Manual de Instalación</h4>
                        <p style="color: #64748b;">Guía paso a paso para instalar y configurar el software.</p>
                    </div>
                </div>
            </section>
        </div>

        <div id="manual-usuario" class="manual-content">
            <section>
                <h2>Manual de Usuario</h2>
                <div class="placeholder">Contenido del Manual de Usuario próximamente disponible.</div>
            </section>
        </div>

        <div id="manual-tecnico" class="manual-content">
            <section id="introduccion">
                <h2 onclick="toggleSubContent(this)">1. Introducción</h2>
                <div class="sub-content">
                    <h3>Propósito del manual:</h3>
                    <p>Este manual tiene como finalidad proporcionar una guía detallada para la instalación, configuración, uso y mantenimiento del software de balanceo y cálculo de raciones para bovinos desarrollado para el Centro Biotecnológico del Caribe (CBC). Está dirigido a desarrolladores, técnicos, instructores, aprendices y ganaderos que utilicen la herramienta.</p>

                    <h3>Alcance del software:</h3>
                    <p>El software permite calcular raciones alimenticias para bovinos en diferentes etapas productivas (crecimiento, mantenimiento, gestación, lactancia, engorde) optimizando la nutrición y reduciendo errores humanos. Facilita reportes, análisis y control histórico para mejorar la productividad y rentabilidad ganadera.</p>

                    <h3>Versiones del documento:</h3>
                    <p>Versión 1.0 — Febrero 2025.</p>
                </div>
            </section>

            <section id="requerimientos">
                <h2 onclick="toggleSubContent(this)">2. Requerimientos del sistema</h2>
                <div class="sub-content">
                    <h3>Hardware necesario:</h3>
                    <ul>
                        <li>Procesador: Intel Core i3 o superior.</li>
                        <li>Memoria RAM: mínimo 4 GB.</li>
                        <li>Almacenamiento: mínimo 500 MB libres.</li>
                        <li>Pantalla: resolución mínima 1366x768 píxeles.</li>
                    </ul>

                    <h3>Software base y dependencias:</h3>
                    <ul>
                        <li>Sistema operativo: Windows 10/11 o Linux Ubuntu 20.04+.</li>
                        <li>Lenguaje backend: Python 3.10+.</li>
                        <li>Lenguaje frontend: HTML, CSS, JavaScript.</li>
                        <li>Base de datos: MySQL.</li>
                        <li>Librerías Python: Flask==2.3.3, Werkzeug==2.3.7, Flask-SQLAlchemy==3.0.5, Flask-Migrate==4.0.4, Flask-Login==0.6.2, Flask-JWT-Extended==4.5.2, pymysql==1.1.0, pulp==2.7.0</li>
                    </ul>

                    <h3>Configuraciones recomendadas:</h3>
                    <ul>
                        <li>Conexión estable a internet para actualizaciones.</li>
                        <li>Usuario con permisos de instalación.</li>
                    </ul>
                </div>
            </section>

            <section id="arquitectura">
                <h2 onclick="toggleSubContent(this)">3. Arquitectura del software</h2>
                <div class="sub-content">
                    <h3>Diseño general y componentes:</h3>
                    <ul>
                        <li>Frontend: Interfaz web amigable e intuitiva para el ingreso de datos y visualización de resultados.</li>
                        <li>Backend: Módulos de cálculo de raciones, conexión a base de datos y generación de reportes.</li>
                        <li>Base de datos: Contiene tablas NRC, composición bromatológica y registros de usuarios y ganado.</li>
                    </ul>

                    <h3>Relaciones entre módulos:</h3>
                    <ul>
                        <li>Módulo de ingreso de datos → Módulo de cálculo → Módulo de reportes.</li>
                        <li>Módulo de usuarios → Control de accesos y permisos.</li>
                    </ul>
                </div>
            </section>

            <section id="instalacion">
                <h2 onclick="toggleSubContent(this)">4. Instalación y configuración</h2>
                <div class="sub-content">
                    <h3>Instalación:</h3>
                    <ol>
                        <li>Descargar el instalador o clonar el repositorio del software.</li>
                        <li>Instalar dependencias según requirements.txt.</li>
                        <li>Configurar variables de entorno (credenciales DB, puertos).</li>
                    </ol>

                    <h3>Configuración inicial:</h3>
                    <ul>
                        <li>Ingresar tablas NRC y composición bromatológica inicial.</li>
                        <li>Registrar usuarios y roles.</li>
                        <li>Definir parámetros por defecto para cálculos.</li>
                    </ul>

                    <h3>Resolución de problemas comunes:</h3>
                    <ul>
                        <li>Error de conexión a base de datos → Verificar credenciales y puerto.</li>
                        <li>Cálculos erróneos → Confirmar datos de entrada y tablas NRC cargadas.</li>
                    </ul>
                </div>
            </section>

            <section id="modulos">
                <h2 onclick="toggleSubContent(this)">5. Descripción de módulos y funciones</h2>
                <div class="sub-content">
                    <ul>
                        <li>Gestión de usuarios: Registro, autenticación y asignación de roles.</li>
                        <li>Ingreso de datos ganaderos: Peso, etapa productiva, raza, ubicación.</li>
                        <li>Ingreso de materias primas: Contenido nutricional y disponibilidad.</li>
                        <li>Cálculo de raciones: Basado en tablas NRC y composición bromatológica.</li>
                        <li>Ajustes manuales: Modificación de ingredientes y cantidades.</li>
                        <li>Historial de cálculos: Seguimiento de cambios y resultados.</li>
                    </ul>
                </div>
            </section>

            <section id="interfaz">
                <h2 onclick="toggleSubContent(this)">6. Interfaz de usuario</h2>
                <div class="sub-content">
                    <ul>
                        <li>Menú principal con acceso a módulos: Inicio, Ganado, Materias Primas, Cálculos, Reportes, Configuración.</li>
                        <li>Pantallas con formularios simples y validados.</li>
                        <li>Reportes descargables en PDF/Excel.</li>
                        <li>Navegación intuitiva con botones claros y mensajes de ayuda.</li>
                    </ul>
                </div>
            </section>

            <section id="apis">
                <h2 onclick="toggleSubContent(this)">7. APIs y servicios externos</h2>
                <div class="sub-content">
                    <h3>Ejemplo de respuesta API para cálculo de ración:</h3>
                    <pre><code>{
  "id_racion": 67,
  "infoAnimal": {
    "grasa_en_leche": 3.5,
    "peso": 475.9,
    "produccion_de_leche": 16
  },
  "racion_optima": {
    "cumplimiento": {
      "EM": true,
      "MS": true,
      "PC": true
    },
    "ingredientes_considerados": [
      {
        "costo_kg": 0.5,
        "em": 2,
        "id_ingrediente": 1,
        "nombre": "bermuda - cynodon dactylon - hoja,tallo",
        "pc_g": 120
      },
      {
        "costo_kg": 0.4,
        "em": 1.9,
        "id_ingrediente": 5,
        "nombre": "colosuana bothriochloa pertusa - hoja,tallo",
        "pc_g": 90
      }
    ],
    "objetivo": "costo",
    "objetivo_ms": 14.28,
    "solucion": [
      {
        "em_aporte": 27.132,
        "id_ingrediente": 5,
        "kg_ms": 14.28,
        "nombre": "colosuana bothriochloa pertusa - hoja,tallo",
        "pc_aporte_g": 1285.2
      }
    ],
    "status": "Optimal",
    "totales": {
      "ED": 33.088,
      "EM": 27.132,
      "EN": 16.361,
      "MS": 14.28,
      "PC": 1285.2,
      "PD": 835.4,
      "PT": 1285.2,
      "TND": 7.505
    }
  },
  "requerimientos": {
    "ED": 23.326,
    "EM": 19.127,
    "EN": 10.733,
    "MS": 14.28,
    "PC": 524.8,
    "PD": 341.1,
    "TND": 5.29
  },
  "saved": true
}</code></pre>
                </div>
            </section>

            <section id="seguridad">
                <h2 onclick="toggleSubContent(this)">8. Seguridad y autenticación</h2>
                <div class="sub-content">
                    <h3>Medidas de seguridad implementadas:</h3>
                    <ul>
                        <li>Autenticación JWT (JSON Web Tokens) para sesiones seguras.</li>
                        <li>Encriptación de contraseñas con algoritmos hash seguros.</li>
                        <li>Validación de entrada de datos para prevenir inyección SQL.</li>
                        <li>Control de acceso basado en roles (RBAC).</li>
                        <li>Logs de auditoría para rastrear actividades del usuario.</li>
                        <li>Configuración HTTPS para comunicaciones seguras.</li>
                        <li>Límites de intentos de inicio de sesión.</li>
                        <li>Sanitización de datos de entrada.</li>
                    </ul>

                    <h3>Roles y permisos:</h3>
                    <ul>
                        <li>Administrador: Acceso completo al sistema.</li>
                        <li>Técnico: Gestión de datos y configuraciones.</li>
                        <li>Usuario: Cálculo de raciones y consulta de reportes.</li>
                        <li>Invitado: Solo visualización de resultados públicos.</li>
                    </ul>
                </div>
            </section>

            <section id="mantenimiento">
                <h2 onclick="toggleSubContent(this)">9. Mantenimiento y actualizaciones</h2>
                <div class="sub-content">
                    <h3>Rutinas de mantenimiento:</h3>
                    <ul>
                        <li>Revisar base de datos y limpiar registros obsoletos cada 6 meses.</li>
                        <li>Aplicar parches y actualizaciones de librerías de seguridad.</li>
                        <li>Monitoreo de rendimiento del servidor y optimización de consultas.</li>
                        <li>Respaldos automáticos diarios de la base de datos.</li>
                        <li>Verificación de integridad de datos semanalmente.</li>
                    </ul>

                    <h3>Proceso de actualización:</h3>
                    <ul>
                        <li>Probar nuevas funciones en entorno de desarrollo.</li>
                        <li>Validación en entorno de prueba antes de producción.</li>
                        <li>Migrar datos con scripts seguros y respaldos previos.</li>
                        <li>Documentar cambios y versiones implementadas.</li>
                    </ul>
                </div>
            </section>

            <section id="problemas">
                <h2 onclick="toggleSubContent(this)">10. Resolución de problemas</h2>
                <div class="sub-content">
                    <h3>Errores comunes y soluciones:</h3>
                    <ul>
                        <li>No carga interfaz: Verificar que el servidor backend esté activo y los puertos estén abiertos.</li>
                        <li>Datos incompletos en reportes: Confirmar que todos los campos obligatorios fueron llenados correctamente.</li>
                        <li>No se guardan cambios: Revisar permisos de usuario y conexión a la base de datos.</li>
                        <li>Cálculos inconsistentes: Validar datos de entrada y actualizar tablas nutricionales.</li>
                        <li>Lentitud del sistema: Optimizar consultas de base de datos y verificar recursos del servidor.</li>
                    </ul>

                    <h3>Preguntas frecuentes:</h3>
                    <ul>
                        <li>¿Se puede usar sin internet? Sí, pero solo en red local con limitaciones de sincronización.</li>
                        <li>¿Puedo agregar nuevos ingredientes? Sí, desde el módulo de materias primas con permisos adecuados.</li>
                        <li>¿Los datos se respaldan automáticamente? Sí, con respaldos diarios programados.</li>
                        <li>¿Cómo actualizo las tablas NRC? A través del módulo de administración con credenciales de técnico.</li>
                    </ul>

                    <h3>Canales de soporte técnico:</h3>
                    <ul>
                        <li>Correo electrónico: servicioalciudadano@sena.edu.co</li>
                        <li>Teléfono de soporte: 5710101</li>
                        <li>Mesa de ayuda: Disponible de lunes a viernes, 8:00 AM - 5:00 PM</li>
                        <li>Documentación técnica: Manual actualizado en el repositorio oficial</li>
                    </ul>

                    <h3>Logs y diagnósticos:</h3>
                    <ul>
                        <li>Logs de aplicación: /var/log/app/application.log</li>
                        <li>Logs de base de datos: /var/log/mysql/error.log</li>
                        <li>Logs de sistema: /var/log/syslog</li>
                        <li>Herramientas de monitoreo: Panel de administración integrado</li>
                    </ul>
                </div>
            </section>
        </div>

        <div id="manual-instalacion" class="manual-content">
            <section>
                <h2>Manual de Instalación</h2>
                <div class="placeholder">Contenido del Manual de Instalación próximamente disponible.</div>
            </section>
        </div>
    </main>

    <footer>
        <p>&copy; 2025 Centro Biotecnológico del Caribe (CBC). Todos los derechos reservados.</p>
    </footer>

    <script src="js/main.js?v=20250914"></script>
</body>
</html>